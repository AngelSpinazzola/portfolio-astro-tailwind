<header class="fixed left-0 right-0 top-0 z-50">
  <nav class="container mx-auto px-4 py-4">
    <div class="flex w-full items-center justify-between">
      <div class="nav-pill mx-auto flex items-center space-x-1 rounded-full bg-white/10 p-1.5 backdrop-blur-md dark:bg-white/5">
        <a href="#projects" class="nav-link">Proyectos</a>
        <a href="#about" class="nav-link">Sobre mí</a>
        <a href="#technologies" class="nav-link">Stack</a>
        <a href="#education" class="nav-link">Educación</a>
      </div>

      <button
        id="theme-toggle"
        class="absolute right-4 rounded-full bg-gray-100/80 p-2.5 transition-all hover:bg-gray-200/80 dark:bg-gray-800/80 dark:hover:bg-gray-700/80"
        aria-label="Cambiar tema"
      >
        <svg class="hidden h-4 w-4 text-gray-300 dark:block" fill="currentColor" viewBox="0 0 20 20">
          <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
        </svg>
        <svg class="block h-4 w-4 text-gray-700 dark:hidden" fill="currentColor" viewBox="0 0 20 20">
          <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414z">
          </path>
        </svg>
      </button>
    </div>
  </nav>
</header>

<style>
  .nav-pill {
    position: relative;
    box-shadow: 0 0 0 1px rgba(229, 231, 235, 0.2);
    transition: all 0.3s ease;
  }

  .dark .nav-pill {
    box-shadow:
      0 0 20px rgba(59, 130, 246, 0.15),
      0 0 0 1px rgba(59, 130, 246, 0.2);
  }

  .nav-link {
    @apply rounded-full px-2 py-1.5 text-xs font-medium text-gray-900 transition-all duration-300 sm:px-3 sm:text-sm dark:text-white;
  }

  .nav-link:hover {
    @apply text-blue-400;
    box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
    transform: scale(1.05);
  }
</style>

<script is:inline>
  (function () {
    const savedTheme = localStorage.getItem("theme");
    const systemPrefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    const theme = savedTheme || "dark";
    if (theme === "dark") {
      document.documentElement.classList.add("dark");
    }
  })();

  function initHeader() {
    const toggle = document.getElementById("theme-toggle");

    if (toggle) {
      toggle.addEventListener("click", function () {
        document.documentElement.classList.toggle("dark");
        const newTheme = document.documentElement.classList.contains("dark") ? "dark" : "light";
        localStorage.setItem("theme", newTheme);
      });
    }

    document.querySelectorAll('a[href^="#"]').forEach(function (anchor) {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        const target = document.querySelector(anchor.getAttribute("href"));
        if (target) {
          target.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });
    });
  }

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initHeader);
  } else {
    initHeader();
  }
</script>